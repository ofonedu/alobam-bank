(()=>{var e={};e.id=399,e.ids=[399],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8563:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(82614).A)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27247:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(82614).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},27910:e=>{"use strict";e.exports=require("stream")},27977:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/george/Desktop/projects/alobam-bank/src/app/dashboard/profile/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/george/Desktop/projects/alobam-bank/src/app/dashboard/profile/page.tsx","default")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},38931:(e,r,s)=>{Promise.resolve().then(s.bind(s,27977))},53678:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(82614).A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},55511:e=>{"use strict";e.exports=require("crypto")},57075:e=>{"use strict";e.exports=require("node:stream")},59058:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>I});var t=s(60687),a=s(43210),i=s(29523),n=s(44493),l=s(80013),o=s(84369),c=s(32584),d=s(35950),p=s(11516),x=s(82614);let u=(0,x.A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var h=s(91840),m=s(59824),j=s(27247),f=s(53678),y=s(44802),g=s(21724),v=s(8738);let b=(0,x.A)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var N=s(83113),w=s(8563),P=s(91821),A=s(63442),k=s(27605),C=s(63503),q=s(71669),S=s(89667),M=s(36497),R=s(29867),_=s(6475);let E=(0,_.createServerReference)("60c6837dc61523025f7e8e8a71c2c78356a4cc4227",_.callServer,void 0,_.findSourceMapURL,"updateUserProfileInformationAction");function L({isOpen:e,onOpenChange:r,userProfile:s,onSuccess:n}){let{toast:l}=(0,R.dj)(),[o,c]=(0,a.useState)(!1),d=(0,k.mN)({resolver:(0,A.u)(M.vR),defaultValues:{firstName:s?.firstName||"",lastName:s?.lastName||"",phoneNumber:s?.phoneNumber||""}}),x=async e=>{if(!s?.uid){l({title:"Error",description:"User not found.",variant:"destructive"});return}c(!0);try{let r=await E(s.uid,e);r.success?(l({title:"Profile Updated",description:r.message}),n()):(l({title:"Update Failed",description:"string"==typeof r.error?r.error:"Please check your input.",variant:"destructive"}),r.error&&"string"!=typeof r.error&&Object.entries(r.error).forEach(([e,r])=>{Array.isArray(r)&&d.setError(e,{type:"server",message:r.join(", ")})}))}catch(e){console.error("Profile update error",e),l({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{c(!1)}};return(0,t.jsx)(C.lG,{open:e,onOpenChange:r,children:(0,t.jsxs)(C.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(C.c7,{children:[(0,t.jsx)(C.L3,{children:"Edit Profile"}),(0,t.jsx)(C.rr,{children:"Update your personal information. Click save when you're done."})]}),(0,t.jsx)(q.lV,{...d,children:(0,t.jsxs)("form",{onSubmit:d.handleSubmit(x),className:"space-y-6 py-4",children:[(0,t.jsx)(q.zB,{control:d.control,name:"firstName",render:({field:e})=>(0,t.jsxs)(q.eI,{children:[(0,t.jsx)(q.lR,{children:"First Name"}),(0,t.jsx)(q.MJ,{children:(0,t.jsx)(S.p,{placeholder:"John",...e})}),(0,t.jsx)(q.C5,{})]})}),(0,t.jsx)(q.zB,{control:d.control,name:"lastName",render:({field:e})=>(0,t.jsxs)(q.eI,{children:[(0,t.jsx)(q.lR,{children:"Last Name"}),(0,t.jsx)(q.MJ,{children:(0,t.jsx)(S.p,{placeholder:"Doe",...e})}),(0,t.jsx)(q.C5,{})]})}),(0,t.jsx)(q.zB,{control:d.control,name:"phoneNumber",render:({field:e})=>(0,t.jsxs)(q.eI,{children:[(0,t.jsx)(q.lR,{children:"Phone Number"}),(0,t.jsx)(q.MJ,{children:(0,t.jsx)(S.p,{placeholder:"(123) 456-7890",...e})}),(0,t.jsx)(q.C5,{})]})}),(0,t.jsxs)(C.Es,{children:[(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:o,children:"Cancel"}),(0,t.jsxs)(i.$,{type:"submit",disabled:o,children:[o&&(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})})]})})}function U({isOpen:e,onOpenChange:r,onSuccess:s}){let{toast:n}=(0,R.dj)(),{changeUserPassword:l}=(0,o.A)(),[c,d]=(0,a.useState)(!1),x=(0,k.mN)({resolver:(0,A.u)(M.$A),defaultValues:{currentPassword:"",newPassword:"",confirmPassword:""}}),u=async e=>{d(!0);try{let t=await l(e);t.success?(n({title:"Success",description:t.message}),x.reset(),s&&s(),r(!1)):n({title:"Password Change Failed",description:t.message,variant:"destructive"})}catch(e){console.error("Password change error",e),n({title:"Error",description:"An unexpected error occurred.",variant:"destructive"})}finally{d(!1)}};return(0,t.jsx)(C.lG,{open:e,onOpenChange:e=>{e||x.reset(),r(e)},children:(0,t.jsxs)(C.Cf,{className:"sm:max-w-md",children:[(0,t.jsxs)(C.c7,{children:[(0,t.jsx)(C.L3,{children:"Change Password"}),(0,t.jsx)(C.rr,{children:"Enter your current password and new password below."})]}),(0,t.jsx)(q.lV,{...x,children:(0,t.jsxs)("form",{onSubmit:x.handleSubmit(u),className:"space-y-6 py-4",children:[(0,t.jsx)(q.zB,{control:x.control,name:"currentPassword",render:({field:e})=>(0,t.jsxs)(q.eI,{children:[(0,t.jsx)(q.lR,{children:"Current Password"}),(0,t.jsx)(q.MJ,{children:(0,t.jsx)(S.p,{type:"password",placeholder:"••••••••",...e})}),(0,t.jsx)(q.C5,{})]})}),(0,t.jsx)(q.zB,{control:x.control,name:"newPassword",render:({field:e})=>(0,t.jsxs)(q.eI,{children:[(0,t.jsx)(q.lR,{children:"New Password"}),(0,t.jsx)(q.MJ,{children:(0,t.jsx)(S.p,{type:"password",placeholder:"••••••••",...e})}),(0,t.jsx)(q.C5,{})]})}),(0,t.jsx)(q.zB,{control:x.control,name:"confirmPassword",render:({field:e})=>(0,t.jsxs)(q.eI,{children:[(0,t.jsx)(q.lR,{children:"Confirm New Password"}),(0,t.jsx)(q.MJ,{children:(0,t.jsx)(S.p,{type:"password",placeholder:"••••••••",...e})}),(0,t.jsx)(q.C5,{})]})}),(0,t.jsxs)(C.Es,{children:[(0,t.jsx)(C.HM,{asChild:!0,children:(0,t.jsx)(i.$,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:c,children:"Cancel"})}),(0,t.jsxs)(i.$,{type:"submit",disabled:c,children:[c&&(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Change Password"]})]})]})})]})})}var B=s(4780);let z=({icon:e,label:r,value:s})=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)(l.Label,{className:"text-sm font-medium text-muted-foreground flex items-center",children:[e," ",r]}),(0,t.jsx)("p",{className:"text-base font-medium break-words",children:s||"N/A"})]});function I(){let{user:e,userProfile:r,loading:s,fetchUserProfile:l}=(0,o.A)(),[x,A]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[q,S]=(0,a.useState)(null),[M,R]=(0,a.useState)(!1);return s&&!r?(0,t.jsxs)("div",{className:"flex h-full items-center justify-center",children:[(0,t.jsx)(p.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"ml-2",children:"Loading profile..."})]}):e?r||s?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Your Profile"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(i.$,{onClick:()=>A(!0),disabled:!r,children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Edit Profile"]}),(0,t.jsxs)(i.$,{variant:"outline",onClick:()=>C(!0),disabled:!r,children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"})," Change Password"]})]})]}),r?(0,t.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Personal Information"}),(0,t.jsx)(n.BT,{children:"Your personal and account details."})]}),(0,t.jsxs)(n.Wu,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)(c.eu,{className:"h-20 w-20",children:[(0,t.jsx)(c.BK,{src:r.photoURL||"",alt:r.displayName||r.email||""}),(0,t.jsx)(c.q5,{className:"text-3xl",children:((e,s,t)=>{if(e&&s)return(e[0]+s[0]).toUpperCase();let a=r?.displayName;if(a){let e=a.split(" ");return e.length>1&&e[0]&&e[e.length-1]?(e[0][0]+e[e.length-1][0]).toUpperCase():e[0]?.substring(0,2).toUpperCase()||"U"}return t?t[0].toUpperCase():"U"})(r.firstName,r.lastName,r.email)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold",children:r.displayName||"Not Set"}),(0,t.jsxs)("p",{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(j.A,{className:"h-4 w-4 text-primary"})," ",r.email]}),r.phoneNumber&&(0,t.jsxs)("p",{className:"text-muted-foreground flex items-center gap-2",children:[(0,t.jsx)(f.A,{className:"h-4 w-4 text-primary"})," ",r.phoneNumber]})]})]}),(0,t.jsx)(d.w,{}),(0,t.jsxs)("div",{className:"grid gap-y-4 gap-x-6 md:grid-cols-2 lg:grid-cols-3",children:[(0,t.jsx)(z,{icon:(0,t.jsx)(y.A,{className:"h-4 w-4 mr-2 text-primary"}),label:"User ID",value:r.uid}),(0,t.jsx)(z,{icon:(0,t.jsx)(g.A,{className:"h-4 w-4 mr-2 text-primary"}),label:"KYC Status",value:{not_started:"Not Started",pending_review:"Pending Review",verified:"Verified",rejected:"Rejected"}[r.kycStatus||"not_started"]}),(0,t.jsx)(z,{icon:(0,t.jsx)(v.A,{className:"h-4 w-4 mr-2 text-primary"}),label:"Account Type",value:M?"Loading...":q||r.accountType||"N/A"}),(0,t.jsx)(z,{icon:(0,t.jsx)(b,{className:"h-4 w-4 mr-2 text-primary"}),label:"Account Number",value:r.accountNumber}),(0,t.jsx)(z,{icon:(0,t.jsx)(N.A,{className:"h-4 w-4 mr-2 text-primary"}),label:"Account Balance",value:(0,B.v)(r.balance,r.primaryCurrency)}),(0,t.jsx)(z,{icon:(0,t.jsx)(w.A,{className:"h-4 w-4 mr-2 text-primary"}),label:"Preferred Currency",value:r.primaryCurrency})]})]})]}):(0,t.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,t.jsx)(n.aR,{children:(0,t.jsx)(n.ZB,{children:"Profile Data"})}),(0,t.jsxs)(n.Wu,{children:[s&&e&&(0,t.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,t.jsx)(p.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,t.jsx)("p",{className:"ml-2",children:"Loading profile data..."})]}),!s&&!r&&e&&(0,t.jsxs)(P.Fc,{variant:"destructive",children:[(0,t.jsx)(u,{className:"h-4 w-4"}),(0,t.jsx)(P.XL,{children:"Error Loading Profile"}),(0,t.jsx)(P.TN,{children:"Could not load your profile information. Please try refreshing or contact support if the issue persists."})]})]})]}),x&&r&&(0,t.jsx)(L,{isOpen:x,onOpenChange:A,userProfile:r,onSuccess:()=>{A(!1),e?.uid&&l(e.uid)}}),k&&r&&(0,t.jsx)(U,{isOpen:k,onOpenChange:C,onSuccess:()=>{C(!1)}}),(0,t.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,t.jsxs)(n.aR,{children:[(0,t.jsx)(n.ZB,{children:"Account Settings"}),(0,t.jsx)(n.BT,{children:"Manage your account preferences and security."})]}),(0,t.jsx)(n.Wu,{children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Advanced account settings will be available here."})})]})]}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:(0,t.jsxs)(P.Fc,{variant:"destructive",className:"max-w-md",children:[(0,t.jsx)(u,{className:"h-4 w-4"}),(0,t.jsx)(P.XL,{children:"Profile Not Loaded"}),(0,t.jsx)(P.TN,{children:"We couldn't load your profile details. This might be due to a network issue or an error fetching your data. Please check your internet connection and try refreshing the page. If the problem persists, contact support."})]})}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:(0,t.jsxs)(P.Fc,{variant:"destructive",className:"max-w-md",children:[(0,t.jsx)(u,{className:"h-4 w-4"}),(0,t.jsx)(P.XL,{children:"Access Denied"}),(0,t.jsx)(P.TN,{children:"You must be logged in to view this page. Please log in and try again."})]})})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73419:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c});var t=s(65239),a=s(48088),i=s(88170),n=s.n(i),l=s(30893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(r,o);let c={children:["",{children:["dashboard",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,27977)),"/home/george/Desktop/projects/alobam-bank/src/app/dashboard/profile/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,63144)),"/home/george/Desktop/projects/alobam-bank/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/home/george/Desktop/projects/alobam-bank/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/george/Desktop/projects/alobam-bank/src/app/dashboard/profile/page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/profile/page",pathname:"/dashboard/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},75883:(e,r,s)=>{Promise.resolve().then(s.bind(s,59058))},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83113:(e,r,s)=>{"use strict";s.d(r,{A:()=>t});let t=(0,s(82614).A)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},84297:e=>{"use strict";e.exports=require("async_hooks")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,156,837,248,225,7,758,821,506,719,782,493],()=>s(73419));module.exports=t})();