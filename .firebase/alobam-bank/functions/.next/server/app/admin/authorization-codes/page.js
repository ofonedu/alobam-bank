(()=>{var e={};e.id=979,e.ids=[979],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3662:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82614).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6211:(e,t,r)=>{"use strict";r.d(t,{A0:()=>o,BF:()=>n,Hj:()=>c,XI:()=>i,nA:()=>u,nd:()=>l});var a=r(60687),s=r(43210),d=r(4780);let i=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,d.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let o=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("thead",{ref:r,className:(0,d.cn)("[&_tr]:border-b",e),...t}));o.displayName="TableHeader";let n=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tbody",{ref:r,className:(0,d.cn)("[&_tr:last-child]:border-0",e),...t}));n.displayName="TableBody",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tfoot",{ref:r,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let c=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("tr",{ref:r,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));c.displayName="TableRow";let l=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("th",{ref:r,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));l.displayName="TableHead";let u=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("td",{ref:r,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));u.displayName="TableCell",s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("caption",{ref:r,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption"},7659:(e,t,r)=>{Promise.resolve().then(r.bind(r,43032))},8003:(e,t,r)=>{Promise.resolve().then(r.bind(r,99111))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14975:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82614).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},14985:e=>{"use strict";e.exports=require("dns")},15079:(e,t,r)=>{"use strict";r.d(t,{bq:()=>p,eb:()=>h,gC:()=>x,l6:()=>l,yv:()=>u});var a=r(60687),s=r(43210),d=r(22670),i=r(61662),o=r(89743),n=r(58450),c=r(4780);let l=d.bL;d.YJ;let u=d.WT,p=s.forwardRef(({className:e,children:t,...r},s)=>(0,a.jsxs)(d.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,(0,a.jsx)(d.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]}));p.displayName=d.l9.displayName;let f=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(d.PP,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(o.A,{className:"h-4 w-4"})}));f.displayName=d.PP.displayName;let m=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(d.wn,{ref:r,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}));m.displayName=d.wn.displayName;let x=s.forwardRef(({className:e,children:t,position:r="popper",...s},i)=>(0,a.jsx)(d.ZL,{children:(0,a.jsxs)(d.UC,{ref:i,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[(0,a.jsx)(f,{}),(0,a.jsx)(d.LM,{className:(0,c.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,a.jsx)(m,{})]})}));x.displayName=d.UC.displayName,s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(d.JU,{ref:r,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=d.JU.displayName;let h=s.forwardRef(({className:e,children:t,...r},s)=>(0,a.jsxs)(d.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(d.VF,{children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})}),(0,a.jsx)(d.p4,{children:t})]}));h.displayName=d.q7.displayName,s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(d.wv,{ref:r,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=d.wv.displayName},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19769:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"000ba8576fdcae11f1077fd2f6107481a50b69a49c":()=>s.J$,"00395e5e4b03385e5ff3a61827ff2eda7721f4e6fd":()=>s.Ns,"00d3b7c7cd72c85ee48ae24fb4ba855eb43cfee9e5":()=>s.a0,"00fca86877d18668f92a7fd7a206255561a88ff3ab":()=>d.ay,"4020c28b5806231680bac26bd1a5f986057ba4604a":()=>s.ii,"4034cc97d27439f4c059c8a95b03da6fa61b86b0db":()=>a.u,"405eb9911f33c3d30f855e4f5a1527a24f42e6c294":()=>s.xk,"407b998a89b103b17288a19e879fdbf57b42a451fa":()=>s.R3,"40e66fba43b324afc7f095ee9cf391952501f74a6c":()=>d.y,"604312656f2004c1bcb55da4e8d649d32b089bca51":()=>a._,"607961c159c9b367a87714546db21e0a9c89f05ec3":()=>d.Iv,"60a9776413df4e601081ca57192a904f54113bcb9a":()=>d.SA,"60b1e2ff96f372e51b9fcb16237485e016caa935df":()=>s.FE,"60ff8321e9d694b897c700ee9ea58f57df8694f2ec":()=>s.yD,"70595c1d3a39338d06b93ec02adff8e1c33f3717b6":()=>d.PB});var a=r(30677),s=r(2235),d=r(93587)},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35265:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82614).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},43032:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>D});var a=r(60687),s=r(43210),d=r(29523),i=r(44493),o=r(89667),n=r(80013),c=r(15079),l=r(6211),u=r(59824),p=r(14975),f=r(11516),m=r(35265),x=r(99196);let h=(0,r(82614).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var b=r(97025),g=r(3662),v=r(57207),y=r(29867),j=r(6475);let A=(0,j.createServerReference)("00fca86877d18668f92a7fd7a206255561a88ff3ab",j.callServer,void 0,j.findSourceMapURL,"getAuthorizationCodesAction"),N=(0,j.createServerReference)("607961c159c9b367a87714546db21e0a9c89f05ec3",j.callServer,void 0,j.findSourceMapURL,"generateAuthorizationCodeAction"),w=(0,j.createServerReference)("40e66fba43b324afc7f095ee9cf391952501f74a6c",j.callServer,void 0,j.findSourceMapURL,"deleteAuthorizationCodeAction");var k=r(91821),C=r(96834);let z=e=>e?e.toLocaleString():"N/A";function D(){let{toast:e}=(0,y.dj)(),[t,r]=(0,s.useState)("COT"),[j,D]=(0,s.useState)(""),[M,P]=(0,s.useState)(!1),[R,I]=(0,s.useState)(null),[S,T]=(0,s.useState)([]),[F,q]=(0,s.useState)(!0),[_,U]=(0,s.useState)(null),[E,G]=(0,s.useState)(null);async function L(){q(!0),U(null);try{let e=await A();e.success&&e.codes?T(e.codes.map(e=>({...e,createdAt:new Date(e.createdAt),expiresAt:e.expiresAt?new Date(e.expiresAt):void 0}))):U(e.error||"Failed to load authorization codes.")}catch(e){U(e.message||"An unexpected error occurred.")}finally{q(!1)}}let B=async r=>{r.preventDefault(),P(!0),I(null);let a=await N(t,j||void 0);a.success&&a.code?(e({title:"Code Generated",description:`New ${a.code.type} code: ${a.code.value}`,duration:1e4}),await L(),D("")):(I(a.error||"Failed to generate code."),e({title:"Error",description:a.error||"Failed to generate code.",variant:"destructive"})),P(!1)},O=async t=>{G(t);let r=await w(t);r.success?(e({title:"Success",description:r.message}),await L()):e({title:"Error",description:r.message||"Failed to delete code.",variant:"destructive"}),G(null)},$=t=>{navigator.clipboard.writeText(t).then(()=>{e({title:"Copied!",description:"Code copied to clipboard."})}).catch(t=>{e({title:"Copy Failed",description:"Could not copy code.",variant:"destructive"}),console.error("Failed to copy: ",t)})};return(0,a.jsxs)("div",{className:"w-full space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold flex items-center",children:[(0,a.jsx)(u.A,{className:"mr-2 h-8 w-8 text-primary"}),"Manage Authorization Codes"]}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Generate, view, and manage COT, IMF, and Tax Clearance codes for user transactions."})]}),(0,a.jsxs)(i.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Generate New Authorization Code"}),(0,a.jsx)(i.BT,{children:"Select code type and optionally assign to a user. Codes are stored in Firestore."})]}),(0,a.jsx)(i.Wu,{children:(0,a.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[R&&(0,a.jsxs)(k.Fc,{variant:"destructive",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)(k.XL,{children:"Generation Error"}),(0,a.jsx)(k.TN,{children:R})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Label,{htmlFor:"codeType",children:"Code Type"}),(0,a.jsxs)(c.l6,{value:t,onValueChange:e=>r(e),children:[(0,a.jsx)(c.bq,{id:"codeType",children:(0,a.jsx)(c.yv,{})}),(0,a.jsxs)(c.gC,{children:[(0,a.jsx)(c.eb,{value:"COT",children:"COT (Cost of Transfer)"}),(0,a.jsx)(c.eb,{value:"IMF",children:"IMF (Monetary Fund)"}),(0,a.jsx)(c.eb,{value:"TAX",children:"Tax Clearance"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Label,{htmlFor:"targetUserId",children:"Target User ID (Optional)"}),(0,a.jsx)(o.p,{id:"targetUserId",name:"targetUserId",value:j,onChange:e=>D(e.target.value),placeholder:"Enter User ID if code is user-specific"})]})]}),(0,a.jsxs)(d.$,{type:"submit",disabled:M,children:[M?(0,a.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,a.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Generate Code"]})]})})]}),(0,a.jsxs)(i.Zp,{className:"shadow-lg",children:[(0,a.jsxs)(i.aR,{children:[(0,a.jsx)(i.ZB,{children:"Existing Authorization Codes"}),(0,a.jsx)(i.BT,{children:"List of generated codes from Firestore."})]}),(0,a.jsxs)(i.Wu,{children:[F&&(0,a.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,a.jsx)(f.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-2",children:"Loading codes..."})]}),_&&!F&&(0,a.jsxs)(k.Fc,{variant:"destructive",children:[(0,a.jsx)(p.A,{className:"h-4 w-4"}),(0,a.jsx)(k.XL,{children:"Error Loading Codes"}),(0,a.jsx)(k.TN,{children:_})]}),!F&&!_&&0===S.length&&(0,a.jsxs)(k.Fc,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4"}),(0,a.jsx)(k.XL,{children:"No Authorization Codes Found"}),(0,a.jsx)(k.TN,{children:"There are no codes generated yet. Use the form above to create one."})]}),!F&&!_&&S.length>0&&(0,a.jsxs)(l.XI,{children:[(0,a.jsx)(l.A0,{children:(0,a.jsxs)(l.Hj,{children:[(0,a.jsx)(l.nd,{children:"Code Value"}),(0,a.jsx)(l.nd,{children:"Type"}),(0,a.jsx)(l.nd,{children:"User ID"}),(0,a.jsx)(l.nd,{children:"Created At"}),(0,a.jsx)(l.nd,{children:"Expires At"}),(0,a.jsx)(l.nd,{children:"Status"}),(0,a.jsx)(l.nd,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(l.BF,{children:S.map(e=>(0,a.jsxs)(l.Hj,{children:[(0,a.jsxs)(l.nA,{className:"font-mono text-xs flex items-center gap-2",children:[e.value,(0,a.jsx)(d.$,{variant:"ghost",size:"icon",title:"Copy Code",onClick:()=>$(e.value),className:"h-6 w-6",children:(0,a.jsx)(h,{className:"h-3 w-3"})})]}),(0,a.jsx)(l.nA,{children:e.type}),(0,a.jsx)(l.nA,{children:e.userId||"N/A (Global)"}),(0,a.jsx)(l.nA,{children:z(e.createdAt)}),(0,a.jsx)(l.nA,{children:z(e.expiresAt)||"N/A"}),(0,a.jsx)(l.nA,{children:e.isUsed?(0,a.jsxs)(C.E,{variant:"outline",className:"text-muted-foreground",children:[(0,a.jsx)(b.A,{className:"mr-1 h-3 w-3 text-destructive"})," Used"]}):(0,a.jsxs)(C.E,{variant:"default",className:"bg-green-500 hover:bg-green-600 text-white",children:[(0,a.jsx)(g.A,{className:"mr-1 h-3 w-3"})," Active"]})}),(0,a.jsx)(l.nA,{className:"text-right space-x-1",children:(0,a.jsx)(d.$,{variant:"ghost",size:"icon",title:"Delete Code",onClick:()=>O(e.id),disabled:E===e.id,className:"text-destructive hover:text-destructive/90",children:E===e.id?(0,a.jsx)(f.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(v.A,{className:"h-4 w-4"})})})]},e.id))})]})]})]})]})}},47411:(e,t,r)=>{Promise.resolve().then(r.bind(r,98669))},55511:e=>{"use strict";e.exports=require("crypto")},57075:e=>{"use strict";e.exports=require("node:stream")},57207:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82614).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},61193:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(60687);r(43210);var s=r(16189),d=r(84369),i=r(74911),o=r(11844),n=r(1679),c=r(7956),l=r(86622),u=r(11516),p=r(79272);function f({children:e}){let{user:t,loading:r,userProfile:f}=(0,d.A)();(0,s.useRouter)();let m=new Date().getFullYear(),x=f?.role==="admin";return!r&&t&&x?(0,a.jsx)(c.GB,{defaultOpen:!0,children:(0,a.jsxs)("div",{className:"flex min-h-screen bg-background text-foreground",children:[(0,a.jsxs)(c.Bx,{collapsible:"icon",className:"border-r bg-sidebar text-sidebar-foreground",children:[(0,a.jsx)(c.Gh,{className:"p-4",children:(0,a.jsx)(i.AppLogo,{colorVariant:"sidebar"})}),(0,a.jsx)(c.Yv,{className:"p-2",children:(0,a.jsx)(o.c,{isAdmin:!0})}),(0,a.jsx)(c.CG,{className:"p-4 border-t border-sidebar-border",children:(0,a.jsx)(l.c,{className:"w-full justify-start"})})]}),(0,a.jsxs)(c.sF,{className:"flex-1 flex flex-col",children:[" ",(0,a.jsxs)("header",{className:"sticky top-0 z-40 flex h-16 items-center justify-between border-b bg-background/95 px-4 sm:px-6 backdrop-blur supports-[backdrop-filter]:bg-background/60 md:justify-end",children:[(0,a.jsx)("div",{className:"md:hidden",children:(0,a.jsx)(c.x2,{})}),(0,a.jsxs)("div",{className:"flex items-center gap-2 md:gap-4",children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-destructive",children:"ADMIN PANEL"}),(0,a.jsx)(p.U,{}),(0,a.jsx)(n.p,{})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:e}),(0,a.jsxs)("footer",{className:"p-4 text-center text-xs text-muted-foreground border-t border-border",children:["\xa9 ",m," Wohana Funds. All rights reserved."]})]})]})}):(0,a.jsxs)("div",{className:"flex h-screen items-center justify-center bg-background text-foreground",children:[(0,a.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,a.jsx)("p",{className:"ml-2",children:x||r||!t?"Loading...":"Access Denied. Redirecting..."})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},73496:e=>{"use strict";e.exports=require("http2")},73659:(e,t,r)=>{Promise.resolve().then(r.bind(r,61193))},74075:e=>{"use strict";e.exports=require("zlib")},78148:(e,t,r)=>{"use strict";r.d(t,{b:()=>o});var a=r(43210),s=r(14163),d=r(60687),i=a.forwardRef((e,t)=>(0,d.jsx)(s.sG.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},79551:e=>{"use strict";e.exports=require("url")},80013:(e,t,r)=>{"use strict";r.d(t,{Label:()=>c});var a=r(60687),s=r(43210),d=r(78148),i=r(24224),o=r(4780);let n=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(d.b,{ref:r,className:(0,o.cn)(n(),e),...t}));c.displayName=d.b.displayName},80315:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>p,tree:()=>c});var a=r(65239),s=r(48088),d=r(88170),i=r.n(d),o=r(30893),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let c={children:["",{children:["admin",{children:["authorization-codes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,98669)),"/home/george/Desktop/projects/alobam-bank/src/app/admin/authorization-codes/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,99111)),"/home/george/Desktop/projects/alobam-bank/src/app/admin/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/home/george/Desktop/projects/alobam-bank/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["/home/george/Desktop/projects/alobam-bank/src/app/admin/authorization-codes/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/admin/authorization-codes/page",pathname:"/admin/authorization-codes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},81630:e=>{"use strict";e.exports=require("http")},84297:e=>{"use strict";e.exports=require("async_hooks")},91645:e=>{"use strict";e.exports=require("net")},91821:(e,t,r)=>{"use strict";r.d(t,{Fc:()=>n,TN:()=>l,XL:()=>c});var a=r(60687),s=r(43210),d=r(24224),i=r(4780);let o=(0,d.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),n=s.forwardRef(({className:e,variant:t,...r},s)=>(0,a.jsx)("div",{ref:s,role:"alert",className:(0,i.cn)(o({variant:t}),e),...r}));n.displayName="Alert";let c=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("h5",{ref:r,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...t}));c.displayName="AlertTitle";let l=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...t}));l.displayName="AlertDescription"},93587:(e,t,r)=>{"use strict";r.d(t,{Iv:()=>o,PB:()=>l,SA:()=>u,ay:()=>n,y:()=>c});var a=r(91199);r(42087);var s=r(20055),d=r(59652),i=r(7944);async function o(e,t){try{let r={value:Math.random().toString(36).substring(2,10).toUpperCase(),type:e,userId:t&&""!==t.trim()?t:null,createdAt:d.Dc.now(),isUsed:!1,generatedBy:"admin_system_placeholder"},a=(0,d.rJ)(s.db,"authorizationCodes"),o=await (0,d.gS)(a,r);(0,i.revalidatePath)("/admin/authorization-codes");let n={id:o.id,value:r.value,type:r.type,createdAt:r.createdAt.toDate().toISOString(),isUsed:r.isUsed,generatedBy:r.generatedBy,userId:null===r.userId?void 0:r.userId};return r.expiresAt&&(n.expiresAt=r.expiresAt.toDate().toISOString()),{success:!0,message:`${e} code generated successfully.`,code:n}}catch(e){return console.error("Error generating authorization code. Details:",e),console.error("Full Error Object:",JSON.stringify(e,Object.getOwnPropertyNames(e))),{success:!1,error:e.message||"An unknown error occurred during code generation."}}}async function n(){try{let e=(0,d.rJ)(s.db,"authorizationCodes"),t=(0,d.P)(e,(0,d.My)("createdAt","desc")),r=(await (0,d.GG)(t)).docs.map(e=>{let t,r;let a=e.data();return t=a.createdAt&&a.createdAt?.toDate?a.createdAt.toDate():a.createdAt instanceof Date?a.createdAt:new Date(a.createdAt),a.expiresAt&&(r=a.expiresAt?.toDate?a.expiresAt.toDate():a.expiresAt instanceof Date?a.expiresAt:new Date(a.expiresAt)),{id:e.id,value:a.value,type:a.type,userId:null===a.userId?void 0:a.userId,createdAt:t.toISOString(),expiresAt:r?r.toISOString():void 0,isUsed:a.isUsed,generatedBy:a.generatedBy}});return{success:!0,codes:r}}catch(e){return console.error("Error fetching authorization codes:",e),{success:!1,error:"Failed to fetch codes."}}}async function c(e){try{let t=(0,d.H9)(s.db,"authorizationCodes",e);return await (0,d.kd)(t),(0,i.revalidatePath)("/admin/authorization-codes"),{success:!0,message:"Code deleted successfully."}}catch(e){return console.error("Error deleting authorization code:",e),{success:!1,message:"Failed to delete code.",error:e.message}}}async function l(e,t,r){try{let a=(0,d.rJ)(s.db,"authorizationCodes");if(r){let s=(0,d.P)(a,(0,d._M)("value","==",e),(0,d._M)("type","==",t),(0,d._M)("isUsed","==",!1),(0,d._M)("userId","==",r),(0,d.AB)(1)),i=await (0,d.GG)(s);if(!i.empty){let e=i.docs[0],r=e.data();if(r.expiresAt&&r.expiresAt.toMillis()<Date.now())return{valid:!1,message:`${t} code assigned to you has expired.`};return{valid:!0,codeId:e.id}}}let i=(0,d.P)(a,(0,d._M)("value","==",e),(0,d._M)("type","==",t),(0,d._M)("isUsed","==",!1),(0,d._M)("userId","==",null),(0,d.AB)(1)),o=await (0,d.GG)(i);if(!o.empty){let e=o.docs[0],r=e.data();if(r.expiresAt&&r.expiresAt.toMillis()<Date.now())return{valid:!1,message:`Global ${t} code has expired.`};return{valid:!0,codeId:e.id}}return{valid:!1,message:`Invalid or already used ${t} code, or code not found for this user.`}}catch(e){return console.error("Error validating authorization code:",e),{valid:!1,message:"Error during code validation."}}}async function u(e,t){try{let r=(0,d.H9)(s.db,"authorizationCodes",e),a={isUsed:!0,updatedAt:(0,d.O5)()};return t?t.update(r,a):await (0,d.mZ)(r,a),(0,i.revalidatePath)("/admin/authorization-codes"),console.log(`Authorization code ${e} marked as used.`),!0}catch(t){return console.error(`Error marking code ${e} as used:`,t),!1}}(0,r(33331).D)([o,n,c,l,u]),(0,a.A)(o,"607961c159c9b367a87714546db21e0a9c89f05ec3",null),(0,a.A)(n,"00fca86877d18668f92a7fd7a206255561a88ff3ab",null),(0,a.A)(c,"40e66fba43b324afc7f095ee9cf391952501f74a6c",null),(0,a.A)(l,"70595c1d3a39338d06b93ec02adff8e1c33f3717b6",null),(0,a.A)(u,"60a9776413df4e601081ca57192a904f54113bcb9a",null)},94735:e=>{"use strict";e.exports=require("events")},96834:(e,t,r)=>{"use strict";r.d(t,{E:()=>o});var a=r(60687);r(43210);var s=r(24224),d=r(4780);let i=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:t,...r}){return(0,a.jsx)("div",{className:(0,d.cn)(i({variant:t}),e),...r})}},97025:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82614).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},98669:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/george/Desktop/projects/alobam-bank/src/app/admin/authorization-codes/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/george/Desktop/projects/alobam-bank/src/app/admin/authorization-codes/page.tsx","default")},99111:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/george/Desktop/projects/alobam-bank/src/app/admin/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/george/Desktop/projects/alobam-bank/src/app/admin/layout.tsx","default")},99196:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(82614).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[447,156,837,248,225,7,729,821,506,719],()=>r(80315));module.exports=a})();