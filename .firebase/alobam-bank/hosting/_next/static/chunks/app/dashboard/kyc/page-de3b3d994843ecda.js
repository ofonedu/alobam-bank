(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8051],{6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let s=r(12115);function a(e,t){let r=(0,s.useRef)(null),a=(0,s.useRef)(null);return(0,s.useCallback)(s=>{if(null===s){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=n(e,s)),t&&(a.current=n(t,s))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},17759:(e,t,r)=>{"use strict";r.d(t,{C5:()=>j,MJ:()=>v,Rr:()=>p,eI:()=>h,lR:()=>x,lV:()=>d,zB:()=>u});var s=r(95155),a=r(12115),n=r(99708),i=r(62177),l=r(59434),o=r(85057);let d=i.Op,c=a.createContext({}),u=e=>{let{...t}=e;return(0,s.jsx)(c.Provider,{value:{name:t.name},children:(0,s.jsx)(i.xI,{...t})})},m=()=>{let e=a.useContext(c),t=a.useContext(f),{getFieldState:r,formState:s}=(0,i.xW)(),n=r(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:l}=t;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},f=a.createContext({}),h=a.forwardRef((e,t)=>{let{className:r,...n}=e,i=a.useId();return(0,s.jsx)(f.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:t,className:(0,l.cn)("space-y-2",r),...n})})});h.displayName="FormItem";let x=a.forwardRef((e,t)=>{let{className:r,...a}=e,{error:n,formItemId:i}=m();return(0,s.jsx)(o.Label,{ref:t,className:(0,l.cn)(n&&"text-destructive",r),htmlFor:i,...a})});x.displayName="FormLabel";let v=a.forwardRef((e,t)=>{let{...r}=e,{error:a,formItemId:i,formDescriptionId:l,formMessageId:o}=m();return(0,s.jsx)(n.DX,{ref:t,id:i,"aria-describedby":a?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!a,...r})});v.displayName="FormControl";let p=a.forwardRef((e,t)=>{let{className:r,...a}=e,{formDescriptionId:n}=m();return(0,s.jsx)("p",{ref:t,id:n,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});p.displayName="FormDescription";let j=a.forwardRef((e,t)=>{var r;let{className:a,children:n,...i}=e,{error:o,formMessageId:d}=m(),c=o?String(null!==(r=null==o?void 0:o.message)&&void 0!==r?r:""):n;return c?(0,s.jsx)("p",{ref:t,id:d,className:(0,l.cn)("text-sm font-medium text-destructive",a),...i,children:c}):null});j.displayName="FormMessage"},22346:(e,t,r)=>{"use strict";r.d(t,{w:()=>l});var s=r(95155),a=r(12115),n=r(87489),i=r(59434);let l=a.forwardRef((e,t)=>{let{className:r,orientation:a="horizontal",decorative:l=!0,...o}=e;return(0,s.jsx)(n.b,{ref:t,decorative:l,orientation:a,className:(0,i.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...o})});l.displayName=n.b.displayName},26126:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var s=r(95155);r(12115);var a=r(74466),n=r(59434);let i=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...a})}},31949:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(40157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},50908:(e,t,r)=>{"use strict";r.d(t,{q:()=>a});var s=r(34477);let a=(0,s.createServerReference)("407833468a9cea4c45f8e9d0be623cbe901a5917fd",s.callServer,void 0,s.findSourceMapURL,"fetchKycData")},66766:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(71469),a=r.n(s)},70495:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var s=r(95155),a=r(12115),n=r(66695),i=r(90221),l=r(62177),o=r(30285),d=r(17759),c=r(62523),u=r(38091),m=r(34477);let f=(0,m.createServerReference)("60f32d43ada7d2374a46b0df1d35ef084cebf5df3b",m.callServer,void 0,m.findSourceMapURL,"submitKycAction");var h=r(34684),x=r(50172),v=r(87481),p=r(66766);function j(e){let{onSuccess:t}=e,{user:r,fetchUserProfile:n}=(0,h.A)(),{toast:m}=(0,v.dj)(),[j,g]=(0,a.useState)(!1),[y,b]=(0,a.useState)(null),w=(0,l.mN)({resolver:(0,i.u)(u.Nt),defaultValues:{fullName:"",dateOfBirth:"",address:"",governmentId:"",governmentIdPhoto:void 0}}),N=e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){let e=new FileReader;e.onloadend=()=>{b(e.result)},e.readAsDataURL(r)}else b(null)},C=async e=>{if(!r){m({title:"Authentication Error",description:"You must be logged in to submit KYC.",variant:"destructive"});return}g(!0);try{let s=await f(r.uid,e);s.success?(m({title:"KYC Submitted",description:s.message}),w.reset(),b(null),await n(r.uid),t&&t(s)):(m({title:"KYC Submission Failed",description:s.message||"An error occurred. Please check your inputs and try again.",variant:"destructive",duration:1e4}),s.error&&"string"!=typeof s.error&&Object.entries(s.error).forEach(e=>{let[t,r]=e;Array.isArray(r)&&w.setError(t,{type:"server",message:r.join(", ")})}))}catch(e){console.error("KYC submission error",e),m({title:"Error",description:"An unexpected error occurred during KYC submission.",variant:"destructive"})}finally{g(!1)}};return(0,s.jsx)(d.lV,{...w,children:(0,s.jsxs)("form",{onSubmit:w.handleSubmit(C),className:"space-y-8",children:[(0,s.jsx)(d.zB,{control:w.control,name:"fullName",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Full Name"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"John Doe",...t})}),(0,s.jsx)(d.Rr,{children:"As it appears on your government ID."}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:w.control,name:"dateOfBirth",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Date of Birth"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{type:"date",...t})}),(0,s.jsx)(d.Rr,{children:"Format: YYYY-MM-DD."}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:w.control,name:"address",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Full Address"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"123 Main St, Anytown, USA",...t})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:w.control,name:"governmentId",render:e=>{let{field:t}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Government ID Number"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"e.g., Driver's License or Passport No.",...t})}),(0,s.jsx)(d.C5,{})]})}}),(0,s.jsx)(d.zB,{control:w.control,name:"governmentIdPhoto",render:e=>{let{field:{onChange:t,onBlur:r,name:a,ref:n}}=e;return(0,s.jsxs)(d.eI,{children:[(0,s.jsx)(d.lR,{children:"Government ID Photo"}),(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{type:"file",accept:"image/png, image/jpeg, image/webp",onChange:e=>{t(e.target.files),N(e)},onBlur:r,name:a,ref:n})}),(0,s.jsx)(d.Rr,{children:"Upload a clear photo of your government-issued ID (e.g., Passport, Driver's License). Max 5MB."}),(0,s.jsx)(d.C5,{})]})}}),y&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(d.lR,{children:"Photo Preview"}),(0,s.jsx)("div",{className:"mt-2 aspect-video w-full max-w-md rounded-md border border-dashed border-border p-2",children:(0,s.jsx)(p.default,{src:y,alt:"ID Preview",width:400,height:225,className:"object-contain w-full h-full"})})]}),(0,s.jsxs)(o.$,{type:"submit",disabled:j,className:"w-full sm:w-auto",children:[j&&(0,s.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Submit KYC Information"]})]})})}var g=r(50908),y=r(55365),b=r(26126),w=r(76570),N=r(40157);let C=(0,N.A)("ShieldQuestion",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),A=(0,N.A)("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);var R=r(31949),S=r(22346);function k(){var e,t;let{user:r,userProfile:i}=(0,h.A)(),[l,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{!async function(){(null==r?void 0:r.uid)&&(c(!0),o(await (0,g.q)(r.uid))),c(!1)}()},[r]);let u=(null==l?void 0:null===(e=l.status)||void 0===e?void 0:e.replace("_"," "))||(null==i?void 0:null===(t=i.kycStatus)||void 0===t?void 0:t.replace("_"," "))||"Not Started",m=e=>e?!(e instanceof Date)||isNaN(e.getTime())?(console.warn("formatDate: Received invalid Date object:",e),"Invalid Date"):e.toLocaleDateString():"N/A";return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"KYC Verification"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Complete your Know Your Customer (KYC) verification to access all platform features."}),d&&(0,s.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,s.jsx)(x.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("p",{className:"ml-2",children:"Loading KYC status..."})]}),!d&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsxs)(n.ZB,{className:"flex items-center gap-2",children:[(e=>{switch(e){case"verified":return(0,s.jsx)(w.A,{className:"h-5 w-5 text-green-500"});case"pending_review":return(0,s.jsx)(C,{className:"h-5 w-5 text-yellow-500"});case"rejected":return(0,s.jsx)(A,{className:"h-5 w-5 text-red-500"});default:return(0,s.jsx)(C,{className:"h-5 w-5 text-muted-foreground"})}})((null==l?void 0:l.status)||(null==i?void 0:i.kycStatus)),"Current KYC Status"]}),(0,s.jsx)(n.BT,{children:"Your current identity verification status."})]}),(0,s.jsxs)(n.Wu,{children:[(0,s.jsx)(b.E,{variant:(e=>{switch(e){case"verified":return"default";case"pending_review":return"secondary";case"rejected":return"destructive";default:return"outline"}})((null==l?void 0:l.status)||(null==i?void 0:i.kycStatus)),className:"text-lg px-3 py-1",children:u.toUpperCase()}),(null==l?void 0:l.submittedAt)&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-2",children:["Submitted on: ",m(l.submittedAt)]}),(null==l?void 0:l.reviewedAt)&&(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Reviewed on: ",m(l.reviewedAt)]}),(null==l?void 0:l.rejectionReason)&&"rejected"===l.status&&(0,s.jsxs)(y.Fc,{variant:"destructive",className:"mt-4",children:[(0,s.jsx)(R.A,{className:"h-4 w-4"}),(0,s.jsx)(y.XL,{children:"Submission Rejected"}),(0,s.jsxs)(y.TN,{children:["Reason: ",l.rejectionReason]})]})]})]}),((null==l?void 0:l.status)==="not_started"||(null==l?void 0:l.status)==="rejected"||!l)&&(!i||"not_started"===i.kycStatus||"rejected"===i.kycStatus)&&(0,s.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,s.jsxs)(n.aR,{children:[(0,s.jsx)(n.ZB,{children:"Submit Your KYC Information"}),(0,s.jsx)(n.BT,{children:(null==l?void 0:l.status)==="rejected"?"Your previous KYC submission was rejected. Please review any feedback and resubmit.":"Please fill out the form below to complete your KYC verification."})]}),(0,s.jsx)(n.Wu,{children:(0,s.jsx)(j,{onSuccess:e=>{if(e.kycData){let t=e.kycData;o({...t,userId:t.userId||(null==r?void 0:r.uid)||"",submittedAt:t.submittedAt?new Date(t.submittedAt):void 0,reviewedAt:t.reviewedAt?new Date(t.reviewedAt):void 0})}}})})]}),(null==l?void 0:l.status)==="pending_review"&&(0,s.jsxs)(y.Fc,{children:[(0,s.jsx)(C,{className:"h-4 w-4"}),(0,s.jsx)(y.XL,{children:"KYC Under Review"}),(0,s.jsx)(y.TN,{children:"Your KYC information has been submitted and is currently under review. We will notify you once the process is complete."})]}),(null==l?void 0:l.status)==="verified"&&(0,s.jsxs)(y.Fc,{variant:"default",className:"bg-green-50 border-green-300 text-green-700 dark:bg-green-900 dark:border-green-700 dark:text-green-300",children:[(0,s.jsx)(w.A,{className:"h-4 w-4 text-green-500"}),(0,s.jsx)(y.XL,{className:"text-green-700 dark:text-green-300",children:"KYC Verified!"}),(0,s.jsx)(y.TN,{className:"text-green-600 dark:text-green-400",children:"Congratulations! Your identity has been successfully verified."})]})]}),(0,s.jsx)(S.w,{className:"my-8"}),(0,s.jsxs)(n.Zp,{className:"shadow-lg",children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Why KYC?"})}),(0,s.jsxs)(n.Wu,{className:"text-muted-foreground space-y-2",children:[(0,s.jsx)("p",{children:"Know Your Customer (KYC) is a mandatory process for financial institutions to verify the identity of their clients. This helps prevent fraud, money laundering, and other illicit activities."}),(0,s.jsx)("p",{children:"By completing KYC, you help us maintain a secure and compliant platform for all users."})]})]})]})}},71469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return o},getImageProps:function(){return l}});let s=r(88229),a=r(38883),n=r(33063),i=s._(r(51193));function l(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let o=n.Image},75205:(e,t,r)=>{Promise.resolve().then(r.bind(r,70495))},76570:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(40157).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},87489:(e,t,r)=>{"use strict";r.d(t,{b:()=>d});var s=r(12115),a=r(63655),n=r(95155),i="horizontal",l=["horizontal","vertical"],o=s.forwardRef((e,t)=>{var r;let{decorative:s,orientation:o=i,...d}=e,c=(r=o,l.includes(r))?o:i;return(0,n.jsx)(a.sG.div,{"data-orientation":c,...s?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...d,ref:t})});o.displayName="Separator";var d=o}},e=>{var t=t=>e(e.s=t);e.O(0,[2992,6073,5511,3787,4602,3198,3063,1975,1603,8441,1684,7358],()=>t(75205)),_N_E=e.O()}]);